


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <link rel="canonical" href="https://calva.rocks/jack-in-guide/">
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.0.1">
    
    
      
        <title>Learn about Calva Jack-in - Calva Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.c3000690.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#learn-about-calva-jack-in" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://calva.rocks" title="Calva Documentation" class="md-header-nav__button md-logo" aria-label="Calva Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" /></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Calva Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Learn about Calva Jack-in
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/BetterThanTomorrow/calva-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://calva.rocks" title="Calva Documentation" class="md-nav__button md-logo" aria-label="Calva Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,8A3,3 0 0,0 15,5A3,3 0 0,0 12,2A3,3 0 0,0 9,5A3,3 0 0,0 12,8M12,11.54C9.64,9.35 6.5,8 3,8V19C6.5,19 9.64,20.35 12,22.54C14.36,20.35 17.5,19 21,19V8C17.5,8 14.36,9.35 12,11.54Z" /></svg>

    </a>
    Calva Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/BetterThanTomorrow/calva-docs/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../connect/" title="Connect Calva to Your Project" class="md-nav__link">
      Connect Calva to Your Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../try-first/" title="Something to Try First (After Connecting)" class="md-nav__link">
      Something to Try First (After Connecting)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../finding-commands/" title="Finding Calva Commands" class="md-nav__link">
      Finding Calva Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../eval-tips/" title="Code Evaluation Tips" class="md-nav__link">
      Code Evaluation Tips
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Features
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Features" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Features
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../commands-top10/" title="The Top 10 Calva Commands" class="md-nav__link">
      The Top 10 Calva Commands
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../formatting/" title="Formatting" class="md-nav__link">
      Formatting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../paredit/" title="Paredit – a Visual Guide" class="md-nav__link">
      Paredit – a Visual Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../debugger/" title="Debugger" class="md-nav__link">
      Debugger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pprint/" title="Pretty Printing" class="md-nav__link">
      Pretty Printing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../linting/" title="Linting" class="md-nav__link">
      Linting
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Customizing Calva
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Customizing Calva" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Customizing Calva
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../customizing/" title="Customizing Calva" class="md-nav__link">
      Customizing Calva
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../connect-sequences/" title="REPL Jack-in and Connection Sequences" class="md-nav__link">
      REPL Jack-in and Connection Sequences
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../custom-commands/" title="Running Custom REPL Commands" class="md-nav__link">
      Running Custom REPL Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Using Calva with X
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Using Calva with X" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Using Calva with X
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../rebl/" title="How to Use Calva and REBL Together" class="md-nav__link">
      How to Use Calva and REBL Together
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vim/" title="Calva and the VIM Extension" class="md-nav__link">
      Calva and the VIM Extension
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../wsl/" title="Calva ❤️ WSL" class="md-nav__link">
      Calva ❤️ WSL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../remote-development/" title="Using Calva with Remote Development" class="md-nav__link">
      Using Calva with Remote Development
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../luminus/" title="How to Use Calva with Luminus" class="md-nav__link">
      How to Use Calva with Luminus
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Etcetera
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Etcetera" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        Etcetera
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../workspace-layouts/" title="Workspace layouts" class="md-nav__link">
      Workspace layouts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../quirks/" title="Quirks" class="md-nav__link">
      Quirks
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      In Depth
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" /></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="In Depth" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
        </span>
        In Depth
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Learn about Calva Jack-in
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z" /></svg>
        </span>
      </label>
    
    <a href="./" title="Learn about Calva Jack-in" class="md-nav__link md-nav__link--active">
      Learn about Calva Jack-in
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-it-solves" class="md-nav__link">
    What it Solves
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-controlled-shell-command" class="md-nav__link">
    A Controlled Shell Command
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-types-builds-aliases-profiles-etcetera" class="md-nav__link">
    Project Types, Builds, Aliases, Profiles, etcetera
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting" class="md-nav__link">
    Connecting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-your-clojure-app" class="md-nav__link">
    Starting Your Clojure App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clojurescript" class="md-nav__link">
    ClojureScript
  </a>
  
    <nav class="md-nav" aria-label="ClojureScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-the-app-and-watchers" class="md-nav__link">
    Compiling the App and Watchers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-app" class="md-nav__link">
    Starting the App
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting_1" class="md-nav__link">
    Connecting
  </a>
  
    <nav class="md-nav" aria-label="Connecting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shadow-cljs-is-less-managed-by-calva" class="md-nav__link">
    shadow-cljs is Less Managed by Calva
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hack-away" class="md-nav__link">
    Hack Away
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-clojurescript-builds" class="md-nav__link">
    Switch ClojureScript Builds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play-with-starting-the-cljs-repl-yourself" class="md-nav__link">
    Play with Starting the cljs-repl Yourself
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-full-stack-applications" class="md-nav__link">
    About Full Stack Applications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#please-grab-your-calva-jack-in-certificate" class="md-nav__link">
    Please Grab your Calva Jack-In Certificate
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-it-solves" class="md-nav__link">
    What it Solves
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-controlled-shell-command" class="md-nav__link">
    A Controlled Shell Command
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#project-types-builds-aliases-profiles-etcetera" class="md-nav__link">
    Project Types, Builds, Aliases, Profiles, etcetera
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting" class="md-nav__link">
    Connecting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-your-clojure-app" class="md-nav__link">
    Starting Your Clojure App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#clojurescript" class="md-nav__link">
    ClojureScript
  </a>
  
    <nav class="md-nav" aria-label="ClojureScript">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-the-app-and-watchers" class="md-nav__link">
    Compiling the App and Watchers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#starting-the-app" class="md-nav__link">
    Starting the App
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#connecting_1" class="md-nav__link">
    Connecting
  </a>
  
    <nav class="md-nav" aria-label="Connecting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#shadow-cljs-is-less-managed-by-calva" class="md-nav__link">
    shadow-cljs is Less Managed by Calva
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hack-away" class="md-nav__link">
    Hack Away
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#switch-clojurescript-builds" class="md-nav__link">
    Switch ClojureScript Builds
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#play-with-starting-the-cljs-repl-yourself" class="md-nav__link">
    Play with Starting the cljs-repl Yourself
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#about-full-stack-applications" class="md-nav__link">
    About Full Stack Applications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#please-grab-your-calva-jack-in-certificate" class="md-nav__link">
    Please Grab your Calva Jack-In Certificate
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/BetterThanTomorrow/calva-docs/edit/master/docs/jack-in-guide.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z" /></svg>
                  </a>
                
                
                  
                
                
                <h1 id="learn-about-calva-jack-in">Learn about Calva Jack-in</h1>
<p><em>The Calva Jack-In Academy, by <a href="https://github.com/PEZ">@pez</a></em></p>
<p>Like with <a href="https://metaredux.com/posts/2019/11/02/hard-cider-understanding-the-jack-in-process.html">CIDER Jack-in</a>, Calva's let-me-help-you-start-your-project-and-connect feature might seem a bit mysterious. It really is helpful, but also really isn't mysterious. Here are a few things about it that is good to know about.</p>
<h2 id="what-it-solves">What it Solves</h2>
<p>At first it might seem that something like <code>lein repl</code> in a terminal and then connecting Calva is enough. It sometimes might be, but only if you are in luck. To provide many of its IDE features, Calva relies on nREPL middleware, mainly <a href="https://github.com/clojure-emacs/cider-nrepl">cider-nrepl</a> and, for ClojureScript, <a href="https://github.com/nrepl/piggieback">piggieback</a>. When starting your Clojure(Script) app and its REPL, it needs to be started with these dependencies satisfied. There are mainly three ways this can be achieved.</p>
<ol>
<li>In the project definition (files like <code>project.clj</code>, <code>deps.edn</code>, <code>shadow-cljs.edn</code>, and combination of these).</li>
<li>In your user profile (files like <code>~/.lein/profiles.clj</code> and <code>~/.clojure/deps.edn</code>).</li>
<li>On the command line.</li>
</ol>
<p>Because <strong>1</strong> and <strong>2</strong> are hard to keep in sync with the various editor environment people in your project might be using, Calva Jack-In is about <strong>3</strong>.</p>
<p>Ideally, you will be able to rid your project files completely of editor dependencies, when people working on the project can rely on the Jack-In features of their Clojure editor.</p>
<h2 id="a-controlled-shell-command">A Controlled Shell Command</h2>
<p>At its core Calva Jack-In is just a glorified, REPL-starting, command-line. No, it is more than that, but anyway. The command line can look like so for a Leiningen project using legacy Figwheel for its ClojureScript assistance:</p>
<pre><code class="sh">lein update-in :dependencies conj '[nrepl&quot;0.6.0&quot;]' -- update-in :dependencies conj '[cider/piggieback&quot;0.4.1&quot;]' -- update-in :dependencies conj '[figwheel-sidecar&quot;0.5.18&quot;]' -- update-in :plugins conj '[cider/cider-nrepl&quot;0.22.4&quot;]' -- update-in '[:repl-options :nrepl-middleware]' conj '[&quot;cider.nrepl/cider-middleware&quot;]' -- update-in '[:repl-options :nrepl-middleware]' conj '[&quot;cider.piggieback/wrap-cljs-repl&quot;]' -- with-profile +dev repl :headless
</code></pre>

<p>Even if a bit long, it might look simple enough. But actually it has taken quite some effort to make Calva craft it. Shell quoting can be really tricky. Look at how <code>'[nrepl"0.6.0"]'</code> doesn't have a space between <code>nrepl</code> and the version. That was the only way I could find that was cross platform enough to make all supported shells parse the command line. (The trick relies on that the string is read by the super reliable Clojure Reader, which does not need that space to tokenize it.)</p>
<p>It is awesome that Clojure is used on so many platforms, but for a tool smith this also means more work. (I think Windows and its shell hell ate up about 95% of the many hours spent on getting the quoting good enough.)</p>
<p>The command-line crafted is then used to start a shell command that Calva controls, but we are getting ahead of ourselves...</p>
<h2 id="project-types-builds-aliases-profiles-etcetera">Project Types, Builds, Aliases, Profiles, etcetera</h2>
<p>In order to cook the right command for your project, Calva looks for project files, reads them, and figures out what possible project types and ClojureScript tools could be involved. Then Calva presents you with a menu with the options it has found. You need to know enough about your project to answer this question. It looks like this in a shadow-cljs project that uses a <code>deps.edn</code> file for setting up its classpath.</p>
<p><img alt="Calva Jack-In Project Types Prompt" src="https://user-images.githubusercontent.com/30010/68088862-66b70a80-fe63-11e9-81e0-099f12460a63.png" /></p>
<p>(I know enough about this particular project to know that I should choose the <code>shadow-cljs</code> project type.)</p>
<p>But Calva isn't ready to cook the command-line just yet, depending on the project type, and contents of your project files, more info is needed. E.g. in the case of shadow-cljs projects, Calva needs to know what builds to start.</p>
<p><img alt="shadow-cljs Builds to start" src="https://user-images.githubusercontent.com/30010/68088914-18eed200-fe64-11e9-842b-e3f0d1ed6b9f.png" /></p>
<p>Here you can select any combination of builds defined in the project, and Calva will cook a command line that starts them.</p>
<p>You might get more prompts from Calva before it issues the command, but for this example project, Calva goes ahead, cooks the command line, and issues it. On my Mac, it looks like so:</p>
<pre><code class="sh">npx shadow-cljs -d cider/piggieback:0.4.1 -d cider/cider-nrepl:0.22.4 watch :app
</code></pre>

<p>(Much shorter than the one with lein-figwheel, right? It is because shadow-cljs is aware of CIDER dependencies, so doesn't need as many dependencies specified as some other project types do.)</p>
<h2 id="connecting">Connecting</h2>
<p>When the command is issued Calva needs to wait until the REPL Server is started, before connecting to it, and possibly continuing with starting a ClojureScript REPL and connect to that as well. It also needs to know which port to connect to.</p>
<p>Because reasons, Calva can't yet read the <code>stdout</code> of the shell command it has issued, so to know when the REPL server is started, and on which port, Calva monitors the filesystem for the <code>.nrepl-port</code> file. (This file is not always named like that. shadow-cljs, for instance, creates the file <code>.shadow-cljs/nrepl.port</code>.)</p>
<p>When the port file is created, Calva picks up the port number from it and connects to the nREPL server. At this point you have a Clojure REPL backing your Calva session, providing all sorts of nice IDE help for you.</p>
<h2 id="starting-your-clojure-app">Starting Your Clojure App</h2>
<p>Once you have the Clojure REPL connected you can start your Clojure app/server. See <a href="connect-sequences">Custom Connect Sequences</a> for how to let Calva do this for you automatically. See the same article for ways to automate more of the Jack-in process. It can be brought down to a single <strong>Jack-In</strong> command, even for a full stack Clojure and ClojureScript application.</p>
<h2 id="clojurescript">ClojureScript</h2>
<p>For ClojureScript, things are not done yet, though, far from it. It turns out that cooking the command line was the easy part.</p>
<p>In order for Calva to provide REPL power for ClojureScript projects, several things need to happen:</p>
<ol>
<li>A Clojure nREPL connection needs to be established. We've covered that above. Calva makes an nREPL session clone to use for the ClojureScript REPL and then:</li>
<li>Your ClojureScript app needs to be compiled.</li>
<li>Your ClojureScript app needs to be started.</li>
<li>The Clojure nREPL session needs to be promoted to a ClojureScript nREPL session. (This is what piggieback helps with.)</li>
</ol>
<p>(It's also possible to connect Calva directly to a Nashorn, bare nodejs, or browser REPL, but let's stick to the scenario where you get a REPL into your running application.)</p>
<h3 id="compiling-the-app-and-watchers">Compiling the App and Watchers</h3>
<p>Depending on ClojureScript project type, Calva uses different methods to start the compilation and the watcher:</p>
<ul>
<li><strong>Figwheel:</strong> The compilation and the watchers are started in the Clojure REPL session. (This is both for Figwheel Main and for lein-figwheel.)</li>
<li><strong>shadow-cljs:</strong> The compilation and the watchers are started with the Jack-In command line.</li>
</ul>
<p>This results in a bit of difference in the user interaction. Mainly that for shadow-cljs, the user needs to check the Jack-In Terminal tab to follow what's going on.</p>
<h3 id="starting-the-app">Starting the App</h3>
<p>Number <strong>1.2</strong> above, <em>the app needs to be started</em>, might seem obvious, but it actually trips many people up. Because of this, Calva goes to quite some lengths to provide assistance. Many projects are configured not to spawn a browser session automatically, requesting the app once it has been compiled, so we can't rely on that.</p>
<p>What Calva does instead is to monitor the output of the commands it uses for starting the compilation, looking for information that the app is ready to be requested/started. It then tells the user this, providing a URL, in case it is a browser app. (There are also settings where you can ask Calva to open the URL automatically for you, regardless what the project settings are.)</p>
<h3 id="connecting_1">Connecting</h3>
<p>Meanwhile, Calva is monitoring the output and when it sees that the app is started, it continues to hook up the REPL connection to the editor.</p>
<p>This whole connection sequence is quite configurable, using <a href="connect-sequences">Custom Connect Sequences</a>. In fact, Calva's built in ClojureScript sequences (Figwheel Main, lein-figwheel, shadow-cljs, and Nashorn) are all built using those same settings mechanisms.</p>
<h4 id="shadow-cljs-is-less-managed-by-calva">shadow-cljs is Less Managed by Calva</h4>
<p><strong>NB:</strong> The managed way in which Calva creates and connects the ClojureScript REPL breaks apart a bit for shadow-cljs, which works a bit differently and also outputs most of the information Calva is looking for on the <code>stdout</code> of the REPL start command (where Calva can't see it, remember?). We'll figure out a better way to support shadow-cljs, but for now, the user needs to do more of this figuring out, than is needed with Figwheel projects.</p>
<h3 id="hack-away">Hack Away</h3>
<p>So, there are things going on when you start Jack-In, and even more things for ClojureScript projects, but Calva tries to keep it together, so as a user it is a matter of paying attention and responding to a few prompts/menus with pre-populated options. (Prompts which can be configured away, even.)</p>
<h3 id="switch-clojurescript-builds">Switch ClojureScript Builds</h3>
<p>Once the REPL is connected you might want to change which ClojureScript build you have Calva connected to. For this Calva has the <strong>Select CLJS Build Connection</strong> command. Please note that you can only switch between builds that you have started.</p>
<h3 id="play-with-starting-the-cljs-repl-yourself">Play with Starting the <code>cljs-repl</code> Yourself</h3>
<p>To get a good grip on what is going on when creating and connecting the ClojureScript REPL, I can recommend making a custom connect sequence which leaves the REPL unpromoted (e.g. give it <code>nil</code> as <code>connectCode</code>), and then evaluate the <code>cljs-repl</code> start commands yourself. So for instance, promoting it to a Nashorn ClojureScript REPL looks something like so:</p>
<pre><code class="clojure">user=&gt; (require 'cljs.repl.nashorn)
user=&gt; (cider.piggieback/cljs-repl (cljs.repl.nashorn/repl-env))
ClojureScript 1.10.145
To quit, type: :cljs/quit
nil
cljs.user=&gt; |
</code></pre>

<p>It is the piggieback middleware there telling you that you can unpromote the REPL by ”evaluating” <code>:cljs/quit</code>.</p>
<h3 id="about-full-stack-applications">About Full Stack Applications</h3>
<p>Because Calva uses the Clojure REPL connection to spawn the ClojureScript REPL, and because Calva only handles one Clojure REPL per VS Code window, some projects need special handling by the user.</p>
<p>If your full stack project is using shadow-cljs for the frontend, like <a href="https://github.com/fulcrologic/fulcro-template">this Fulcro template project</a> does, maybe you first try Jack-In to your backend Clojure REPL, and then to your shadow-cljs frontend. This works if you do it in separate VS Code windows, but if you do it in the same window, the second Jack-In will kill the backend session!</p>
<p>See also about <a href="../workspace-layouts/">Workspace Layouts</a> for tips about how to actually open the same project folder in two separate VS Code windows.</p>
<h2 id="please-grab-your-calva-jack-in-certificate">Please Grab your Calva Jack-In Certificate</h2>
<p>There, you now know all there is to know about Calva Jack-in.</p>
<p>Just kidding, there are a few more details to it, some of which might find their way into this article at a later time.</p>
<p>To really get to know it all, you will need to spend some time with the Calva Jack-In code. Head over to the <a href="https://github.com/BetterThanTomorrow/calva/wiki">Calva Development Wiki</a> to learn how to hack on Calva.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../quirks/" title="Quirks" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" /></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Quirks
              </div>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.f45d2d8d.min.js"></script>
      <script src="../assets/javascripts/bundle.74d0b805.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.7f7c8775.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>